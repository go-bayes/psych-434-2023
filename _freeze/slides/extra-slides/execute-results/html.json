{
  "hash": "fde270d7c8ee32a11c79a8198aa1e085",
  "result": {
    "markdown": "---\ntitle: \"How to ask a Why Question\"\nsubtitle: \"And why to ask a why question\"\nformat:\n  revealjs: \n    slide-number: true\n    smaller: false\n    scrollable: true\n    incremental: true\n    chalkboard: true \n    buttons: false\n    preview-links: auto\n    theme: moon\n    css: styles.css\n    embed-resources: false\n    code-fold: false\n    code-overflow: scroll\n    code-line-numbers: true\n    auto-stretch: true\n    html-math-method: katex\n\n---\n\n\n\n\n## Why questions\n\nWhy why? \n\n\n\n## Test\n\n\nAt the core: \n\n\\[ Y|A=1  \\neq Y_{0} \\]\n\n::: {.r-fit-text}\n\n:::\n\n\n## Dags\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggdag)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'ggdag'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following object is masked from 'package:stats':\n\n    filter\n```\n:::\n\n```{.r .cell-code}\nlibrary(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'dplyr'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n:::\n\n```{.r .cell-code}\ncoords <- read.table(header = TRUE, text = \"\n  x y name\n  0 1 U\n  1 .1 L0\n  2 0 A0\n  3 0.1 Y0\n  4 0 A1\n  5 0.2 Y2\n\")\n\nd <- dagify(\n  A0 ~ L0,\n  A1 ~ A0,\n  L0 ~ U,\n  Y0 ~ A0,\n  Y2 ~ A1 + L0,\n  Y2 ~ U + Y0,\n  coords = coords)\n\nggdag(d) +\n   theme_dag()\n```\n\n::: {.cell-output-display}\n![](extra-slides_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n\n\n## Code \n```{.r}\nlibrary(ggdag)\nlibrary(dplyr)\n\n\ncoords <- read.table(header = TRUE, text = \"\n  x y name\n  0 1 U\n  1 0 L0\n  2 0 A0\n  3 0 Y0\n  4 0 A1\n  5 0 Y2\n\")\n\nd <- dagify(\n  A1 ~ L0 + A0,\n  L0 ~ U,\n  Y0 ~ U,\n  Y2 ~ A1,\n  Y2 ~ U + Y0,\n  coords = coords)\n\nggdag(d) +\n   theme_dag()\n```\n\n\n##  DAG \n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dagitty)\nlibrary(ggdag)\n\n# coordinates for graph\ncoords <- read.table(header = TRUE, text = \"\n  x y name\n  0 -1 U\n  0 1 L\n  2 0 A0\n  3 0 Y0\n  4 0 A1\n  6 0 Y2\n\")\n\n# make into daggity object\nd <- dagify(\n  L ~ U,\n  A0 ~  L + U,\n  Y0 ~  L + U,\n  A1 ~  L + U ,\n  Y2 ~  L + U,\n  exposure = \"A1\",\n  outcome = \"Y2\",\n  latent = \"U\",\n  coords = coords)\n\n# plot\nggdag(d,  text = TRUE, node = FALSE, \n      text_size = 9,\n      text_col = \"black\") +\n   theme_dag()\n```\n\n::: {.cell-output-display}\n![](extra-slides_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n## Check confounding\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggdag_adjustment_set(d) + theme_dag_blank()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in dag_adjustment_sets(., exposure = exposure, outcome = outcome, : Failed to close backdoor paths. Common reasons include:\n            * graph is not acyclic\n            * backdoor paths are not closeable with given set of variables\n            * necessary variables are unmeasured (latent)\n```\n:::\n\n::: {.cell-output-display}\n![](extra-slides_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n## Visualise confounding\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggdag_dseparated(d,\n  controlling_for = c(\"L\", \"A0\", \"Y0\"),\n  text = TRUE, collider_lines = FALSE\n) + theme_dag()\n```\n\n::: {.cell-output-display}\n![](extra-slides_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n\n\n## test dag\n\n```{.r}\ninstall.packages(c(\"coda\",\"mvtnorm\",\"devtools\",\"loo\",\"dagitty\",\"shape\"))\ndevtools::install_github(\"rmcelreath/rethinking\")\nlibrary(rethinking)\ndrawdag(d, arrow = \"gray\",  Z=list(\"U\"))\n```\n\n\n",
    "supporting": [
      "extra-slides_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}